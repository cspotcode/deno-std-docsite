<!DOCTYPE html><html class="default" lang="en"><head><style>body { visibility: hidden; }</style><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="IE=edge"><title>load | Documentation</title><meta name="description" content="Documentation for Documentation"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="../assets/style.css"><link rel="stylesheet" href="../assets/highlight.css"><script defer="" src="../assets/main.js"></script><script async="" src="../assets/icons.js" id="tsd-icons-script"></script><link rel="stylesheet" href="../assets/dmt/dmt-components.css"><link rel="stylesheet" href="../assets/dmt/dmt-theme.css"><script src="../assets/dmt/dmt-components.js" type="module"></script><noscript><style>body { visibility: visible; }</style></noscript></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";</script><div class="overlay"></div>
<main><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field" id="dmt-search-main"></div><div class="field" id="dmt-toolbar"><a href="../index.html" class="title">Documentation</a></div></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main" tabindex="-1"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules/dotenv_mod.html">dotenv/mod</a></li><li><a href="dotenv_mod.load.html">load</a></li></ul><div class="dmt-title-header-flex"><h1>Function load</h1></div></div><section class="tsd-panel"><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="load" class="tsd-anchor"></a><span class="tsd-kind-call-signature">load</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#load" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Load environment variables from a <code>.env</code> file.  Loaded variables are accessible
in a configuration object returned by the <code>load()</code> function, as well as optionally
exporting them to the process environment using the <code>export</code> option.</p>
<p>Inspired by the node modules <a href="https://github.com/motdotla/dotenv"><code>dotenv</code></a>
and <a href="https://github.com/motdotla/dotenv-expand"><code>dotenv-expand</code></a>.</p>
<p>Note: The key needs to match the pattern /^[a-zA-Z_][a-zA-Z0-9_]*$/.</p>
<a id="md:basic-usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Basic usage<a href="#md:basic-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="sh"><span class="hl-10"># .env</span><br><span class="hl-8">GREETING</span><span class="hl-2">=</span><span class="hl-6">hello</span><span class="hl-2"> </span><span class="hl-9">world</span>
</code><button type="button">Copy</button></pre>

<p>Then import the environment variables using the <code>load</code> function.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">options</span>: <a href="../interfaces/dotenv_mod.LoadOptions.html" class="tsd-signature-type tsd-kind-interface">LoadOptions</a><span class="tsd-signature-symbol"> = {}</span></span><div class="tsd-comment tsd-typography"><p>The options</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>The parsed environment variables</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Basic usage"><h4 class="tsd-anchor-link"><a id="Example: Basic usage" class="tsd-anchor"></a>Example: Basic usage<a href="#Example: Basic usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-10">// app.ts</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">load</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/dotenv"</span><span class="hl-2">;</span><br><br><span class="hl-8">console</span><span class="hl-2">.</span><span class="hl-9">log</span><span class="hl-2">(</span><span class="hl-7">await</span><span class="hl-2"> </span><span class="hl-9">load</span><span class="hl-2">({ </span><span class="hl-8">export:</span><span class="hl-2"> </span><span class="hl-11">true</span><span class="hl-2"> })); </span><span class="hl-10">// { GREETING: "hello world" }</span><br><span class="hl-8">console</span><span class="hl-2">.</span><span class="hl-9">log</span><span class="hl-2">(</span><span class="hl-8">Deno</span><span class="hl-2">.</span><span class="hl-8">env</span><span class="hl-2">.</span><span class="hl-9">get</span><span class="hl-2">(</span><span class="hl-6">"GREETING"</span><span class="hl-2">)); </span><span class="hl-10">// hello world</span>
</code><button type="button">Copy</button></pre>

<p>Run this with <code>deno run --allow-read --allow-env app.ts</code>.</p>
<p>.env files support blank lines, comments, multi-line values and more.
See Parsing Rules below for more detail.</p>
<a id="md:auto-loading" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Auto loading<a href="#md:auto-loading" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Import the <code>load.ts</code> module to auto-import from the <code>.env</code> file and into
the process environment.</p>
</div><div class="tsd-tag-Example: Auto-loading"><h4 class="tsd-anchor-link"><a id="Example: Auto-loading" class="tsd-anchor"></a>Example: Auto-loading<a href="#Example: Auto-loading" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-10">// app.ts</span><br><span class="hl-7">import</span><span class="hl-2"> </span><span class="hl-6">"@std/dotenv/load"</span><span class="hl-2">;</span><br><br><span class="hl-8">console</span><span class="hl-2">.</span><span class="hl-9">log</span><span class="hl-2">(</span><span class="hl-8">Deno</span><span class="hl-2">.</span><span class="hl-8">env</span><span class="hl-2">.</span><span class="hl-9">get</span><span class="hl-2">(</span><span class="hl-6">"GREETING"</span><span class="hl-2">)); </span><span class="hl-10">// hello world</span>
</code><button type="button">Copy</button></pre>

<p>Run this with <code>deno run --allow-read --allow-env app.ts</code>.</p>
<a id="md:files" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Files<a href="#md:files" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Dotenv supports a number of different files, all of which are optional.
File names and paths are configurable.</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>.env</td>
<td>primary file for storing key-value environment entries</td>
</tr>
</tbody>
</table>
<a id="md:configuration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Configuration<a href="#md:configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Loading environment files comes with a number of options passed into
the <code>load()</code> function, all of which are optional.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>envPath</td>
<td>./.env</td>
<td>Path and filename of the <code>.env</code> file.  Use null to prevent the .env file from being loaded.</td>
</tr>
<tr>
<td>export</td>
<td>false</td>
<td>When true, this will export all environment variables in the <code>.env</code> file to the process environment (e.g. for use by <code>Deno.env.get()</code>) but only if they are not already set.  If a variable is already in the process, the <code>.env</code> value is ignored.</td>
</tr>
</tbody>
</table>
<a id="md:example-configuration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example configuration<a href="#md:example-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3></div><div class="tsd-tag-Example: Using with options"><h4 class="tsd-anchor-link"><a id="Example: Using with options" class="tsd-anchor"></a>Example: Using with options<a href="#Example: Using with options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">load</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/dotenv"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">conf</span><span class="hl-2"> = </span><span class="hl-7">await</span><span class="hl-2"> </span><span class="hl-9">load</span><span class="hl-2">({</span><br><span class="hl-2">  </span><span class="hl-8">envPath:</span><span class="hl-2"> </span><span class="hl-6">"./.env_prod"</span><span class="hl-2">, </span><span class="hl-10">// Uses .env_prod instead of .env</span><br><span class="hl-2">  </span><span class="hl-8">export:</span><span class="hl-2"> </span><span class="hl-11">true</span><span class="hl-2">, </span><span class="hl-10">// Exports all variables to the environment</span><br><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:permissions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Permissions<a href="#md:permissions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>At a minimum, loading the <code>.env</code> related files requires the <code>--allow-read</code> permission.  Additionally, if
you access the process environment, either through exporting your configuration or expanding variables
in your <code>.env</code> file, you will need the <code>--allow-env</code> permission.  E.g.</p>
<pre><code class="sh"><span class="hl-9">deno</span><span class="hl-2"> </span><span class="hl-6">run</span><span class="hl-2"> </span><span class="hl-11">--allow-read=.env</span><span class="hl-2"> </span><span class="hl-11">--allow-env=ENV1,ENV2</span><span class="hl-2"> </span><span class="hl-6">app.ts</span>
</code><button type="button">Copy</button></pre>

<a id="md:parsing-rules" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Parsing Rules<a href="#md:parsing-rules" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The parsing engine currently supports the following rules:</p>
<ul>
<li>Variables that already exist in the environment are not overridden with
<code>export: true</code></li>
<li><code>BASIC=basic</code> becomes <code>{ BASIC: "basic" }</code></li>
<li>empty lines are skipped</li>
<li>lines beginning with <code>#</code> are treated as comments</li>
<li>empty values become empty strings (<code>EMPTY=</code> becomes <code>{ EMPTY: "" }</code>)</li>
<li>single and double quoted values are escaped (<code>SINGLE_QUOTE='quoted'</code> becomes
<code>{ SINGLE_QUOTE: "quoted" }</code>)</li>
<li>new lines are expanded in double quoted values (<code>MULTILINE="new\nline"</code>
becomes</li>
</ul>
<pre><code><span class="hl-2">{ </span><span class="hl-17">MULTILINE</span><span class="hl-2">: </span><span class="hl-6">"new</span><span class="hl-16">\n</span><span class="hl-6">line"</span><span class="hl-2"> }</span>
</code><button>Copy</button></pre>

<ul>
<li>inner quotes are maintained (think JSON) (<code>JSON={"foo": "bar"}</code> becomes
<code>{ JSON: "{\"foo\": \"bar\"}" }</code>)</li>
<li>whitespace is removed from both ends of unquoted values (see more on
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim"><code>trim</code></a>)
(<code>FOO= some value</code> becomes <code>{ FOO: "some value" }</code>)</li>
<li>whitespace is preserved on both ends of quoted values (<code>FOO=" some value "</code>
becomes <code>{ FOO: " some value " }</code>)</li>
<li>dollar sign with an environment key in or without curly braces in unquoted
values will expand the environment key (<code>KEY=$KEY</code> or <code>KEY=${KEY}</code> becomes
<code>{ KEY: "&lt;KEY_VALUE_FROM_ENV&gt;" }</code>)</li>
<li>escaped dollar sign with an environment key in unquoted values will escape the
environment key rather than expand (<code>KEY=\$KEY</code> becomes <code>{ KEY: "\\$KEY" }</code>)</li>
<li>colon and a minus sign with a default value(which can also be another expand
value) in expanding construction in unquoted values will first attempt to
expand the environment key. If it’s not found, then it will return the default
value (<code>KEY=${KEY:-default}</code> If KEY exists it becomes
<code>{ KEY: "&lt;KEY_VALUE_FROM_ENV&gt;" }</code> If not, then it becomes
<code>{ KEY: "default" }</code>. Also there is possible to do this case
<code>KEY=${NO_SUCH_KEY:-${EXISTING_KEY:-default}}</code> which becomes
<code>{ KEY: "&lt;EXISTING_KEY_VALUE_FROM_ENV&gt;" }</code>)</li>
</ul>
</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/dotenv/mod.ts#L210">dotenv/mod.ts:210</a></li></ul></aside></li></ul></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked=""><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open="" class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details" tabindex="-1"><a href="#md:basic-usage"><span>Basic usage</span></a><a href="#md:auto-loading"><span>Auto loading</span></a><a href="#md:files"><span>Files</span></a><a href="#md:configuration"><span>Configuration</span></a><ul><li><a href="#md:example-configuration"><span>Example configuration</span></a></li></ul><a href="#md:permissions"><span>Permissions</span></a><a href="#md:parsing-rules"><span>Parsing <wbr>Rules</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>Documentation</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a> with the <a href="https://www.npmjs.com/package/@typhonjs-typedoc/typedoc-theme-dmt" target="_blank">Default Modern Theme</a></p></footer></main></body></html>