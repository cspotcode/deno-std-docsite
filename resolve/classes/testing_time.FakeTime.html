<!DOCTYPE html><html class="default" lang="en"><head><style>body { visibility: hidden; }</style><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="IE=edge"><title>FakeTime | Documentation</title><meta name="description" content="Documentation for Documentation"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="../assets/style.css"><link rel="stylesheet" href="../assets/highlight.css"><script defer="" src="../assets/main.js"></script><script async="" src="../assets/icons.js" id="tsd-icons-script"></script><link rel="stylesheet" href="../assets/dmt/dmt-components.css"><link rel="stylesheet" href="../assets/dmt/dmt-theme.css"><script src="../assets/dmt/dmt-components.js" type="module"></script><noscript><style>body { visibility: visible; }</style></noscript></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";</script><div class="overlay"></div>
<main><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field" id="dmt-search-main"></div><div class="field" id="dmt-toolbar"><a href="../index.html" class="title">Documentation</a></div></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main" tabindex="-1"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules/testing_time.html">testing/time</a></li><li><a href="testing_time.FakeTime.html">FakeTime</a></li></ul><div class="dmt-title-header-flex"><h1>Class FakeTime</h1></div></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>Overrides the real Date object and timer functions with fake ones that can be
controlled through the fake time instance.</p>
<p>Note: there is no setter for the <code>start</code> property, as it cannot be changed
after initialization.</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> {</span><br><span class="hl-2">  </span><span class="hl-8">assertSpyCalls</span><span class="hl-2">,</span><br><span class="hl-2">  </span><span class="hl-8">spy</span><span class="hl-2">,</span><br><span class="hl-2">} </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/mock"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><br><span class="hl-11">function</span><span class="hl-2"> </span><span class="hl-9">secondInterval</span><span class="hl-2">(</span><span class="hl-9">cb</span><span class="hl-2">: () </span><span class="hl-11">=&gt;</span><span class="hl-2"> </span><span class="hl-12">void</span><span class="hl-2">): </span><span class="hl-12">number</span><span class="hl-2"> {</span><br><span class="hl-2">  </span><span class="hl-7">return</span><span class="hl-2"> </span><span class="hl-9">setInterval</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">1000</span><span class="hl-2">);</span><br><span class="hl-2">}</span><br><br><span class="hl-8">Deno</span><span class="hl-2">.</span><span class="hl-9">test</span><span class="hl-2">(</span><span class="hl-6">"secondInterval calls callback every second and stops after being cleared"</span><span class="hl-2">, () </span><span class="hl-11">=&gt;</span><span class="hl-2"> {</span><br><span class="hl-2">  </span><span class="hl-11">using</span><span class="hl-2"> </span><span class="hl-14">time</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">();</span><br><br><span class="hl-2">  </span><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">cb</span><span class="hl-2"> = </span><span class="hl-9">spy</span><span class="hl-2">();</span><br><span class="hl-2">  </span><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">intervalId</span><span class="hl-2"> = </span><span class="hl-9">secondInterval</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-9">assertSpyCalls</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">0</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-8">time</span><span class="hl-2">.</span><span class="hl-9">tick</span><span class="hl-2">(</span><span class="hl-13">500</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-9">assertSpyCalls</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">0</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-8">time</span><span class="hl-2">.</span><span class="hl-9">tick</span><span class="hl-2">(</span><span class="hl-13">500</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-9">assertSpyCalls</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">1</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-8">time</span><span class="hl-2">.</span><span class="hl-9">tick</span><span class="hl-2">(</span><span class="hl-13">3500</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-9">assertSpyCalls</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">4</span><span class="hl-2">);</span><br><br><span class="hl-2">  </span><span class="hl-9">clearInterval</span><span class="hl-2">(</span><span class="hl-8">intervalId</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-8">time</span><span class="hl-2">.</span><span class="hl-9">tick</span><span class="hl-2">(</span><span class="hl-13">1000</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-9">assertSpyCalls</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">4</span><span class="hl-2">);</span><br><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

</div></div></section><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L282">testing/time.ts:282</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open=""><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" aria-expanded="false"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="testing_time.FakeTime.html#constructor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Accessors</h3><div class="tsd-index-list"><a href="testing_time.FakeTime.html#now" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>now</span></a>
<a href="testing_time.FakeTime.html#start" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>start</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="testing_time.FakeTime.html#_dispose_" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>[dispose]</span></a>
<a href="testing_time.FakeTime.html#delay" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>delay</span></a>
<a href="testing_time.FakeTime.html#next" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>next</span></a>
<a href="testing_time.FakeTime.html#nextAsync" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>next<wbr>Async</span></a>
<a href="testing_time.FakeTime.html#restore" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>restore</span></a>
<a href="testing_time.FakeTime.html#runAll" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>run<wbr>All</span></a>
<a href="testing_time.FakeTime.html#runAllAsync" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>run<wbr>All<wbr>Async</span></a>
<a href="testing_time.FakeTime.html#runMicrotasks" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>run<wbr>Microtasks</span></a>
<a href="testing_time.FakeTime.html#tick" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>tick</span></a>
<a href="testing_time.FakeTime.html#tickAsync" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>tick<wbr>Async</span></a>
<a href="testing_time.FakeTime.html#restore-2" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>restore</span></a>
<a href="testing_time.FakeTime.html#restoreFor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>restore<wbr>For</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open=""><summary class="tsd-accordion-summary" data-key="section-Constructors"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Constructors</h2></summary><section><section class="tsd-panel tsd-member"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="constructor.new_FakeTime" class="tsd-anchor"></a><span class="tsd-kind-constructor-signature">new <wbr>Fake<wbr>Time</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">start</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="testing_time.FakeTime.html" class="tsd-signature-type tsd-kind-class">FakeTime</a><a href="#constructor.new_FakeTime" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Construct a FakeTime object. This overrides the real Date object and timer functions with fake ones that can be
controlled through the fake time instance.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">start</span>: <br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tsd-signature-symbol">| </span><span class="tsd-signature-type">null</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tsd-signature-symbol">| </span><span class="tsd-signature-type">string</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tsd-signature-symbol">| </span><span class="tsd-signature-type">number</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="tsd-signature-symbol">| </span><span class="tsd-signature-type">Date</span></span><div class="tsd-comment tsd-typography"><p>The time to simulate. The default is the current time.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <a href="../interfaces/testing_time.FakeTimeOptions.html" class="tsd-signature-type tsd-kind-interface">FakeTimeOptions</a></span><div class="tsd-comment tsd-typography"><p>The options</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="testing_time.FakeTime.html" class="tsd-signature-type tsd-kind-class">FakeTime</a></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws" class="tsd-anchor"></a>Throws<a href="#Throws" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>If time is already faked</p>
</div><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-1" class="tsd-anchor"></a>Throws<a href="#Throws-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>If the start is invalid</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L293">testing/time.ts:293</a></li></ul></aside></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open=""><summary class="tsd-accordion-summary" data-key="section-Accessors"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Accessors</h2></summary><section><section class="tsd-panel tsd-member"><a id="now" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>now</span><a href="#now" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature" id="now.now-1"><span class="tsd-signature-keyword">get</span> now<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>The number of milliseconds elapsed since the epoch (January 1, 1970 00:00:00 UTC) for the fake time.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4><p>The number of milliseconds elapsed since the epoch (January 1, 1970 00:00:00 UTC) for the fake time</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-1" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assertEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(</span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2">, </span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-9">tick</span><span class="hl-2">(</span><span class="hl-13">5_000</span><span class="hl-2">);</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2">, </span><span class="hl-13">20_000</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L467">testing/time.ts:467</a></li></ul></aside></li><li class="tsd-signature" id="now.now-2"><span class="tsd-signature-keyword">set</span> now<span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">value</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Set the current time. It will call any functions waiting to be called between the current and new fake time.
If the timer callback throws, time will stop advancing forward beyond that timer.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">value</span>: <span class="tsd-signature-type">number</span></span><div class="tsd-comment tsd-typography"><p>The current time (in milliseconds)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-2" class="tsd-anchor"></a>Throws<a href="#Throws-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>If the time goes backwards</p>
</div><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-2" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assertEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(</span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2">, </span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2"> = </span><span class="hl-13">35_000</span><span class="hl-2">;</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2">, </span><span class="hl-13">35_000</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L492">testing/time.ts:492</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="start" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>start</span><a href="#start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature" id="start.start-1"><span class="tsd-signature-keyword">get</span> start<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>The initial number of milliseconds elapsed since the epoch (January 1, 1970 00:00:00 UTC) for the fake time.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4><p>The initial number of milliseconds elapsed since the epoch (January 1, 1970 00:00:00 UTC) for the fake time.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-3" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assertEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(</span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">start</span><span class="hl-2">, </span><span class="hl-13">15_000</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L539">testing/time.ts:539</a></li></ul></aside></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open=""><summary class="tsd-accordion-summary" data-key="section-Methods"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Methods</h2></summary><section><section class="tsd-panel tsd-member"><a id="_dispose_" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>[dispose]</span><a href="#_dispose_" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="_dispose_._dispose_-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">[dispose]</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#_dispose_._dispose_-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Restores real time.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-4" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assertEquals</span><span class="hl-2">, </span><span class="hl-8">assertNotEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">setTimeout</span><span class="hl-2"> = </span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">;</span><br><br><span class="hl-2">{</span><br><span class="hl-2">  </span><span class="hl-11">using</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">();</span><br><br><span class="hl-2">  </span><span class="hl-9">assertNotEquals</span><span class="hl-2">(</span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">, </span><span class="hl-8">setTimeout</span><span class="hl-2">);</span><br><br><span class="hl-2">  </span><span class="hl-10">// test timer related things.</span><br><br><span class="hl-2">  </span><span class="hl-10">// You don't need to call fakeTime.restore() explicitly</span><br><span class="hl-2">  </span><span class="hl-10">// as it's implicitly called via the [Symbol.dispose] method</span><br><span class="hl-2">  </span><span class="hl-10">// when declared with `using`.</span><br><span class="hl-2">}</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">, </span><span class="hl-8">setTimeout</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L364">testing/time.ts:364</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="delay" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>delay</span><a href="#delay" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="delay.delay-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">delay</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">ms</span>, <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span><a href="#delay.delay-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Resolves after the given number of milliseconds using real time.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">ms</span>: <span class="tsd-signature-type">number</span></span><div class="tsd-comment tsd-typography"><p>The milliseconds to delay</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">options</span>: <span class="tsd-signature-type">DelayOptions</span><span class="tsd-signature-symbol"> = {}</span></span><div class="tsd-comment tsd-typography"><p>The options</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-5" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assertEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(</span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-7">await</span><span class="hl-2"> </span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-9">delay</span><span class="hl-2">(</span><span class="hl-13">500</span><span class="hl-2">); </span><span class="hl-10">// wait 500 ms in real time.</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2">, </span><span class="hl-13">15_000</span><span class="hl-2">); </span><span class="hl-10">// The simulated time doesn't advance.</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L561">testing/time.ts:561</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="next" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>next</span><a href="#next" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="next.next-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">next</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">boolean</span><a href="#next.next-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Advances time to when the next scheduled timer is due.
If there are no pending timers, time will not be changed.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">boolean</span></h4><p><code>true</code> when there is a scheduled timer and <code>false</code> when there is not.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-6" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assert</span><span class="hl-2">, </span><span class="hl-8">assertEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(</span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-11">let</span><span class="hl-2"> </span><span class="hl-8">called</span><span class="hl-2"> = </span><span class="hl-11">false</span><span class="hl-2">;</span><br><br><span class="hl-9">setTimeout</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">called</span><span class="hl-2"> = </span><span class="hl-11">true</span><span class="hl-2"> }, </span><span class="hl-13">5000</span><span class="hl-2">);</span><br><br><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-9">next</span><span class="hl-2">();</span><br><br><span class="hl-9">assert</span><span class="hl-2">(</span><span class="hl-8">called</span><span class="hl-2">);</span><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2">, </span><span class="hl-13">20_000</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L703">testing/time.ts:703</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="nextAsync" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>next<wbr>Async</span><a href="#nextAsync" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="nextAsync.nextAsync-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">next<wbr>Async</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">&gt;</span><a href="#nextAsync.nextAsync-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Runs all pending microtasks then advances time to when the next scheduled timer is due.
If there are no pending timers, time will not be changed.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">&gt;</span></h4><p><code>true</code> if the pending timers existed and the time advanced, <code>false</code> if there was no pending timer and the time didn't advance.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-7" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-7" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assert</span><span class="hl-2">, </span><span class="hl-8">assertEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(</span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-11">let</span><span class="hl-2"> </span><span class="hl-8">called0</span><span class="hl-2"> = </span><span class="hl-11">false</span><span class="hl-2">;</span><br><span class="hl-11">let</span><span class="hl-2"> </span><span class="hl-8">called1</span><span class="hl-2"> = </span><span class="hl-11">false</span><span class="hl-2">;</span><br><br><span class="hl-9">setTimeout</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">called0</span><span class="hl-2"> = </span><span class="hl-11">true</span><span class="hl-2"> }, </span><span class="hl-13">5000</span><span class="hl-2">);</span><br><span class="hl-12">Promise</span><span class="hl-2">.</span><span class="hl-9">resolve</span><span class="hl-2">().</span><span class="hl-9">then</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">called1</span><span class="hl-2"> = </span><span class="hl-11">true</span><span class="hl-2"> });</span><br><br><span class="hl-7">await</span><span class="hl-2"> </span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-9">nextAsync</span><span class="hl-2">();</span><br><br><span class="hl-9">assert</span><span class="hl-2">(</span><span class="hl-8">called0</span><span class="hl-2">);</span><br><span class="hl-9">assert</span><span class="hl-2">(</span><span class="hl-8">called1</span><span class="hl-2">);</span><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2">, </span><span class="hl-13">20_000</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L735">testing/time.ts:735</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="restore" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>restore</span><a href="#restore" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="restore.restore-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">restore</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#restore.restore-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Restores time related global functions to their original state.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-8" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-8" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assertEquals</span><span class="hl-2">, </span><span class="hl-8">assertNotEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">setTimeout</span><span class="hl-2"> = </span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(); </span><span class="hl-10">// global timers are now faked</span><br><br><span class="hl-9">assertNotEquals</span><span class="hl-2">(</span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">, </span><span class="hl-8">setTimeout</span><span class="hl-2">);</span><br><br><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-9">restore</span><span class="hl-2">(); </span><span class="hl-10">// timers are restored</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">, </span><span class="hl-8">setTimeout</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L821">testing/time.ts:821</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="runAll" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>run<wbr>All</span><a href="#runAll" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="runAll.runAll-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">run<wbr>All</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#runAll.runAll-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Advances time forward to the next due timer until there are no pending timers remaining.
If the timers create additional timers, they will be run too. If there is an interval,
time will keep advancing forward until the interval is cleared.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-9" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-9" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assertEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(</span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-11">let</span><span class="hl-2"> </span><span class="hl-8">count</span><span class="hl-2"> = </span><span class="hl-13">0</span><span class="hl-2">;</span><br><br><span class="hl-9">setTimeout</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">count</span><span class="hl-2">++ }, </span><span class="hl-13">5_000</span><span class="hl-2">);</span><br><span class="hl-9">setTimeout</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">count</span><span class="hl-2">++ }, </span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><span class="hl-9">setTimeout</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">count</span><span class="hl-2">++ }, </span><span class="hl-13">35_000</span><span class="hl-2">);</span><br><br><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-9">runAll</span><span class="hl-2">();</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">count</span><span class="hl-2">, </span><span class="hl-13">3</span><span class="hl-2">);</span><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2">, </span><span class="hl-13">50_000</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L764">testing/time.ts:764</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="runAllAsync" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>run<wbr>All<wbr>Async</span><a href="#runAllAsync" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="runAllAsync.runAllAsync-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">run<wbr>All<wbr>Async</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span><a href="#runAllAsync.runAllAsync-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Advances time forward to the next due timer until there are no pending timers remaining.
If the timers create additional timers, they will be run too. If there is an interval,
time will keep advancing forward until the interval is cleared.
Runs all pending microtasks before each timer.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-10" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-10" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assertEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(</span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-11">let</span><span class="hl-2"> </span><span class="hl-8">count</span><span class="hl-2"> = </span><span class="hl-13">0</span><span class="hl-2">;</span><br><br><span class="hl-9">setTimeout</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">count</span><span class="hl-2">++ }, </span><span class="hl-13">5_000</span><span class="hl-2">);</span><br><span class="hl-9">setTimeout</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">count</span><span class="hl-2">++ }, </span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><span class="hl-9">setTimeout</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">count</span><span class="hl-2">++ }, </span><span class="hl-13">35_000</span><span class="hl-2">);</span><br><span class="hl-12">Promise</span><span class="hl-2">.</span><span class="hl-9">resolve</span><span class="hl-2">().</span><span class="hl-9">then</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">count</span><span class="hl-2">++ });</span><br><br><span class="hl-7">await</span><span class="hl-2"> </span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-9">runAllAsync</span><span class="hl-2">();</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">count</span><span class="hl-2">, </span><span class="hl-13">4</span><span class="hl-2">);</span><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2">, </span><span class="hl-13">50_000</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L796">testing/time.ts:796</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="runMicrotasks" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>run<wbr>Microtasks</span><a href="#runMicrotasks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="runMicrotasks.runMicrotasks-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">run<wbr>Microtasks</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span><a href="#runMicrotasks.runMicrotasks-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Runs all pending microtasks.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-11" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-11" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assert</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(</span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-11">let</span><span class="hl-2"> </span><span class="hl-8">called</span><span class="hl-2"> = </span><span class="hl-11">false</span><span class="hl-2">;</span><br><br><span class="hl-12">Promise</span><span class="hl-2">.</span><span class="hl-9">resolve</span><span class="hl-2">().</span><span class="hl-9">then</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">called</span><span class="hl-2"> = </span><span class="hl-11">true</span><span class="hl-2"> });</span><br><br><span class="hl-7">await</span><span class="hl-2"> </span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-9">runMicrotasks</span><span class="hl-2">();</span><br><br><span class="hl-9">assert</span><span class="hl-2">(</span><span class="hl-8">called</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L607">testing/time.ts:607</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="tick" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>tick</span><a href="#tick" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="tick.tick-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">tick</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">ms</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#tick.tick-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Adds the specified number of milliseconds to the fake time.
This will call any functions waiting to be called between the current and new fake time.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">ms</span>: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 0</span></span><div class="tsd-comment tsd-typography"><p>The milliseconds to advance</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-12" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-12" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> {</span><br><span class="hl-2">  </span><span class="hl-8">assertSpyCalls</span><span class="hl-2">,</span><br><span class="hl-2">  </span><span class="hl-8">spy</span><span class="hl-2">,</span><br><span class="hl-2">} </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/mock"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><br><span class="hl-11">function</span><span class="hl-2"> </span><span class="hl-9">secondInterval</span><span class="hl-2">(</span><span class="hl-9">cb</span><span class="hl-2">: () </span><span class="hl-11">=&gt;</span><span class="hl-2"> </span><span class="hl-12">void</span><span class="hl-2">): </span><span class="hl-12">number</span><span class="hl-2"> {</span><br><span class="hl-2">  </span><span class="hl-7">return</span><span class="hl-2"> </span><span class="hl-9">setInterval</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">1000</span><span class="hl-2">);</span><br><span class="hl-2">}</span><br><br><span class="hl-8">Deno</span><span class="hl-2">.</span><span class="hl-9">test</span><span class="hl-2">(</span><span class="hl-6">"secondInterval calls callback every second and stops after being cleared"</span><span class="hl-2">, () </span><span class="hl-11">=&gt;</span><span class="hl-2"> {</span><br><span class="hl-2">  </span><span class="hl-11">using</span><span class="hl-2"> </span><span class="hl-14">time</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">();</span><br><br><span class="hl-2">  </span><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">cb</span><span class="hl-2"> = </span><span class="hl-9">spy</span><span class="hl-2">();</span><br><span class="hl-2">  </span><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">intervalId</span><span class="hl-2"> = </span><span class="hl-9">secondInterval</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-9">assertSpyCalls</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">0</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-8">time</span><span class="hl-2">.</span><span class="hl-9">tick</span><span class="hl-2">(</span><span class="hl-13">500</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-9">assertSpyCalls</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">0</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-8">time</span><span class="hl-2">.</span><span class="hl-9">tick</span><span class="hl-2">(</span><span class="hl-13">500</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-9">assertSpyCalls</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">1</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-8">time</span><span class="hl-2">.</span><span class="hl-9">tick</span><span class="hl-2">(</span><span class="hl-13">3500</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-9">assertSpyCalls</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">4</span><span class="hl-2">);</span><br><br><span class="hl-2">  </span><span class="hl-9">clearInterval</span><span class="hl-2">(</span><span class="hl-8">intervalId</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-8">time</span><span class="hl-2">.</span><span class="hl-9">tick</span><span class="hl-2">(</span><span class="hl-13">1000</span><span class="hl-2">);</span><br><span class="hl-2">  </span><span class="hl-9">assertSpyCalls</span><span class="hl-2">(</span><span class="hl-8">cb</span><span class="hl-2">, </span><span class="hl-13">4</span><span class="hl-2">);</span><br><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L648">testing/time.ts:648</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="tickAsync" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>tick<wbr>Async</span><a href="#tickAsync" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="tickAsync.tickAsync-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">tick<wbr>Async</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">ms</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span><a href="#tickAsync.tickAsync-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Runs all pending microtasks then adds the specified number of milliseconds to the fake time.
This will call any functions waiting to be called between the current and new fake time.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">ms</span>: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 0</span></span><div class="tsd-comment tsd-typography"><p>The milliseconds to advance</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-13" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-13" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assert</span><span class="hl-2">, </span><span class="hl-8">assertEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">(</span><span class="hl-13">15_000</span><span class="hl-2">);</span><br><br><span class="hl-11">let</span><span class="hl-2"> </span><span class="hl-8">called</span><span class="hl-2"> = </span><span class="hl-11">false</span><span class="hl-2">;</span><br><br><span class="hl-12">Promise</span><span class="hl-2">.</span><span class="hl-9">resolve</span><span class="hl-2">().</span><span class="hl-9">then</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> { </span><span class="hl-8">called</span><span class="hl-2"> = </span><span class="hl-11">true</span><span class="hl-2"> });</span><br><br><span class="hl-7">await</span><span class="hl-2"> </span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-9">tickAsync</span><span class="hl-2">(</span><span class="hl-13">5_000</span><span class="hl-2">);</span><br><br><span class="hl-9">assert</span><span class="hl-2">(</span><span class="hl-8">called</span><span class="hl-2">);</span><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">fakeTime</span><span class="hl-2">.</span><span class="hl-8">now</span><span class="hl-2">, </span><span class="hl-13">20_000</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L675">testing/time.ts:675</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="restore-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Static</code><span>restore</span><a href="#restore-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="restore-2.restore-3" class="tsd-anchor"></a><span class="tsd-kind-call-signature">restore</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#restore-2.restore-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Restores real time.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-3" class="tsd-anchor"></a>Throws<a href="#Throws-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>If time is already restored</p>
</div><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-14" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-14" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assertEquals</span><span class="hl-2">, </span><span class="hl-8">assertNotEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">setTimeout</span><span class="hl-2"> = </span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">();</span><br><br><span class="hl-9">assertNotEquals</span><span class="hl-2">(</span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">, </span><span class="hl-8">setTimeout</span><span class="hl-2">);</span><br><br><span class="hl-8">FakeTime</span><span class="hl-2">.</span><span class="hl-9">restore</span><span class="hl-2">();</span><br><br><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">, </span><span class="hl-8">setTimeout</span><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L389">testing/time.ts:389</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="restoreFor" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Static</code><span>restore<wbr>For</span><a href="#restoreFor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="restoreFor.restoreFor-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">restore<wbr>For</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="testing_time.FakeTime.html#restoreFor.restoreFor-1.T">T</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">callback</span>, <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="testing_time.FakeTime.html#restoreFor.restoreFor-1.T">T</a><span class="tsd-signature-symbol">&gt;</span><a href="#restoreFor.restoreFor-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Restores real time temporarily until callback returns and resolves.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="restoreFor.restoreFor-1.T" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">T</span></span><div class="tsd-comment tsd-typography"><p>The returned value type of the callback</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">callback</span>: <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><a class="tsd-signature-type tsd-kind-type-parameter" href="testing_time.FakeTime.html#restoreFor.restoreFor-1.T">T</a><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="testing_time.FakeTime.html#restoreFor.restoreFor-1.T">T</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span></span><div class="tsd-comment tsd-typography"><p>The callback to be called while FakeTime being restored</p>
</div><div class="tsd-comment tsd-typography"></div><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature"><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a class="tsd-signature-type tsd-kind-type-parameter" href="testing_time.FakeTime.html#restoreFor.restoreFor-1.T">T</a><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="testing_time.FakeTime.html#restoreFor.restoreFor-1.T">T</a><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-description"><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag">Rest</code><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span>: <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span></span></li></ul></div><h4 class="tsd-returns-title">Returns <a class="tsd-signature-type tsd-kind-type-parameter" href="testing_time.FakeTime.html#restoreFor.restoreFor-1.T">T</a><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="testing_time.FakeTime.html#restoreFor.restoreFor-1.T">T</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></li></ul></li><li><span><code class="tsd-tag">Rest</code><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span>: <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>The arguments to pass to the callback</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="testing_time.FakeTime.html#restoreFor.restoreFor-1.T">T</a><span class="tsd-signature-symbol">&gt;</span></h4><p>The returned value from the callback</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-Throws"><h4 class="tsd-anchor-link"><a id="Throws-4" class="tsd-anchor"></a>Throws<a href="#Throws-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>If time is not faked</p>
</div><div class="tsd-tag-Example: Usage"><h4 class="tsd-anchor-link"><a id="Example: Usage-15" class="tsd-anchor"></a>Example: Usage<a href="#Example: Usage-15" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">FakeTime</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/testing/time"</span><span class="hl-2">;</span><br><span class="hl-7">import</span><span class="hl-2"> { </span><span class="hl-8">assertEquals</span><span class="hl-2">, </span><span class="hl-8">assertNotEquals</span><span class="hl-2"> } </span><span class="hl-7">from</span><span class="hl-2"> </span><span class="hl-6">"@std/assert"</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">setTimeout</span><span class="hl-2"> = </span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">;</span><br><br><span class="hl-11">const</span><span class="hl-2"> </span><span class="hl-14">fakeTime</span><span class="hl-2"> = </span><span class="hl-11">new</span><span class="hl-2"> </span><span class="hl-9">FakeTime</span><span class="hl-2">();</span><br><br><span class="hl-9">assertNotEquals</span><span class="hl-2">(</span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">, </span><span class="hl-8">setTimeout</span><span class="hl-2">);</span><br><br><span class="hl-8">FakeTime</span><span class="hl-2">.</span><span class="hl-9">restoreFor</span><span class="hl-2">(() </span><span class="hl-11">=&gt;</span><span class="hl-2"> {</span><br><span class="hl-2">  </span><span class="hl-9">assertEquals</span><span class="hl-2">(</span><span class="hl-8">globalThis</span><span class="hl-2">.</span><span class="hl-8">setTimeout</span><span class="hl-2">, </span><span class="hl-8">setTimeout</span><span class="hl-2">);</span><br><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/denoland/std/blob/5f299ca4f9a33b8bb9d4371452879b56989f3e19/testing/time.ts#L422">testing/time.ts:422</a></li></ul></aside></li></ul></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked=""><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open="" class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details" tabindex="-1"><details open="" class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="tsd-otp-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Constructors</summary><div><a href="#constructor" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a></div></details><details open="" class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="tsd-otp-Accessors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Accessors</summary><div><a href="#now" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>now</span></a><a href="#start" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>start</span></a></div></details><details open="" class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="tsd-otp-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Methods</summary><div><a href="#_dispose_" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>[dispose]</span></a><a href="#delay" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>delay</span></a><a href="#next" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>next</span></a><a href="#nextAsync" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>next<wbr>Async</span></a><a href="#restore" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>restore</span></a><a href="#runAll" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>run<wbr>All</span></a><a href="#runAllAsync" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>run<wbr>All<wbr>Async</span></a><a href="#runMicrotasks" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>run<wbr>Microtasks</span></a><a href="#tick" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>tick</span></a><a href="#tickAsync" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>tick<wbr>Async</span></a><a href="#restore-2" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>restore</span></a><a href="#restoreFor" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>restore<wbr>For</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>Documentation</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a> with the <a href="https://www.npmjs.com/package/@typhonjs-typedoc/typedoc-theme-dmt" target="_blank">Default Modern Theme</a></p></footer></main></body></html>